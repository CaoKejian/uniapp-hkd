(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["subpkg-edit-edit"],{"045a":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"edit"},[i("v-uni-view",{staticClass:"title"},[i("v-uni-input",{attrs:{type:"text",placeholder:"请输入完整的标题","placeholder-class":"placeholderClass"},model:{value:t.artObj.title,callback:function(e){t.$set(t.artObj,"title",e)},expression:"artObj.title"}})],1),i("v-uni-view",{staticClass:"content"},[i("v-uni-editor",{staticClass:"myEdit",attrs:{placeholder:"写点什么吧","show-img-resize":!0,"show-img-size":!0,"show-img-toolbar":!0},on:{ready:function(e){arguments[0]=e=t.$handleEvent(e),t.onEditReady.apply(void 0,arguments)},focus:function(e){arguments[0]=e=t.$handleEvent(e),t.onFocus.apply(void 0,arguments)},statuschange:function(e){arguments[0]=e=t.$handleEvent(e),t.onStatuschange.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"btnGroup"},[i("v-uni-button",{attrs:{type:"primary",disabled:!t.artObj.title.length},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onSubmit.apply(void 0,arguments)}}},[t._v("确认发表")])],1),t.toolshow?i("v-uni-view",{staticClass:"tools"},[i("v-uni-view",{staticClass:"item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clickHead.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"iconfont icon-zitibiaoti",class:t.headShow?"active":""})],1),i("v-uni-view",{staticClass:"item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clickBold.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"iconfont icon-zitijiacu",class:t.boldShow?"active":""})],1),i("v-uni-view",{staticClass:"item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clickItalic.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"iconfont icon-zitixieti",class:t.italicShow?"active":""})],1),i("v-uni-view",{staticClass:"item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clickDivider.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"iconfont icon-fengexian"})],1),i("v-uni-view",{staticClass:"item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clickInsertImage.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"iconfont icon-charutupian"})],1),i("v-uni-view",{staticClass:"item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.editok.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"iconfont icon-duigou_kuai"})],1)],1):t._e()],1)},a=[]},"0bd8":function(t,e,i){var n=i("8f8d");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("8c80374a",n,!0,{sourceMap:!1,shadowMode:!1})},"384a":function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.getImgSrc=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,i=[];return t.replace(/<img [^>]*src=['"]([^'"]+)[^>]*>/g,(function(t,e){i.push(e)})),i=i.splice(0,e),i},e.getProvince=function(){return new Promise((function(t,e){var i=uni.getStorageSync("historyProvince");i?t(i.province):uni.request({url:"https://restapi.amap.com/v3/ip?key=7ef462c39299f921a8a2557ad84c2cb2",success:function(e){var i="";i="string"==typeof e.data.province?e.data.province:"未知",t(i);var n={province:i,time:Date.now()};uni.setStorageSync("historyProvince",n)},fail:function(t){e(t)}})}))},e.toMapAPP=function(t,e,i){var n="";"Android"==plus.os.name?plus.nativeUI.actionSheet({title:"选择地图应用",cancel:"取消",buttons:[{title:"腾讯地图"},{title:"百度地图"},{title:"高德地图"}]},(function(a){switch(a.index){case 1:n="qqmap://map/geocoder?coord=".concat(t,",").concat(e,"&referer=xxx");break;case 2:n="baidumap://map/marker?location=".concat(t,",").concat(e,"&title=").concat(i,"&coord_type=gcj02&src=andr.baidu.openAPIdemo");break;case 3:n="androidamap://viewMap?sourceApplication=appname&poiname=".concat(i,"&lat=").concat(t,"&lon=").concat(e,"&dev=0");break;default:break}""!=n&&(n=encodeURI(n),plus.runtime.openURL(n,(function(t){plus.nativeUI.alert("本机未安装指定的地图应用")})))})):plus.nativeUI.actionSheet({title:"选择地图应用",cancel:"取消",buttons:[{title:"腾讯地图"},{title:"百度地图"},{title:"高德地图"}]},(function(a){switch(a.index){case 1:n="qqmap://map/geocoder?coord=".concat(t,",").concat(e,"&referer=xxx");break;case 2:n="baidumap://map/marker?location=".concat(t,",").concat(e,"&title=").concat(i,"&content=").concat(i,"&src=ios.baidu.openAPIdemo&coord_type=gcj02");break;case 3:n="iosamap://viewMap?sourceApplication=applicationName&poiname=".concat(i,"&lat=").concat(t,"&lon=").concat(e,"&dev=0");break;default:break}""!=n&&(n=encodeURI(n),plus.runtime.openURL(n,(function(t){plus.nativeUI.alert("本机未安装指定的地图应用")})))}))},i("ac1f"),i("5319"),i("14d9"),i("a434"),i("d3b7"),i("99af")},4822:function(t,e,i){"use strict";i.r(e);var n=i("045a"),a=i("94d6");for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("abf9");var c=i("f0c5"),s=Object(c["a"])(a["default"],n["b"],n["c"],!1,null,"29a81b66",null,!1,n["a"],void 0);e["default"]=s.exports},"71f3":function(t,e,i){"use strict";(function(t){i("7a82");var n=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("c7eb")),o=n(i("b85c")),c=n(i("1da1")),s=n(i("5530"));i("a4d3"),i("e01a"),i("fb6a"),i("ac1f"),i("baa5");var r=i("384a"),l=t.database(),u={data:function(){return{toolshow:!1,headShow:!1,boldShow:!1,italicShow:!1,artObj:{title:"",content:"",description:"",picurls:"",province:"",user_id:"",user_nicheng:"",user_touxiang:""}}},onLoad:function(){var e=this;this.artObj.user_id=uni.getStorageSync("name").name,this.artObj.user_nicheng=uni.getStorageSync("name").nicheng,t.database().collection("userinfo").where("name=='".concat(this.artObj.user_id,"'")).get().then((function(t){e.artObj.user_touxiang=t.result.data[0].touxiang,console.log("头像",e.artObj.user_touxiang)})),(0,r.getProvince)().then((function(t){e.artObj.province=t}))},methods:{onSubmit:function(){var t=this;this.editorCtx.getContents({success:function(e){console.log(e),t.artObj.description=e.text.slice(0,50),t.artObj.content=e.html,t.artObj.picurls=(0,r.getImgSrc)(e.html),uni.showLoading({title:"发布中..."}),console.log(t.artObj),t.addData()}})},addData:function(){l.collection("article").add((0,s.default)({},this.artObj)).then((function(t){uni.hideLoading(),uni.showToast({title:"发布成功"}),setTimeout((function(){uni.reLaunch({url:"/pages/interlocution/interlocution"},800)}))})).catch((function(t){console.log(t)}))},onFocus:function(){this.toolshow=!0},onEditReady:function(){var t=this;uni.createSelectorQuery().in(this).select(".myEdit").fields({size:!0,context:!0},(function(e){console.log(e),t.editorCtx=e.context})).exec()},checkStatus:function(t,e,i){e.hasOwnProperty(t)?this[i]=!0:this[i]=!1},onStatuschange:function(t){var e=t.detail;this.checkStatus("header",e,this.headShow),this.checkStatus("bold",e,this.boldShow),this.checkStatus("italic",e,this.italicShow)},clickDivider:function(){this.editorCtx.insertDivider()},clickHead:function(){this.headShow=!this.headShow,this.editorCtx.format("header",!!this.headShow&&"h2")},clickBold:function(){this.boldShow=!this.boldShow,this.editorCtx.format("bold")},clickItalic:function(){this.italicShow=!this.italicShow,this.editorCtx.format("italic")},clickInsertImage:function(){var e=this;uni.chooseImage({success:function(){var i=(0,c.default)((0,a.default)().mark((function i(n){var c,s,r,l,u,d;return(0,a.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:uni.showLoading({title:"上传中请稍后",mask:!0}),c=(0,o.default)(n.tempFiles),i.prev=2,c.s();case 4:if((s=c.n()).done){i.next=14;break}return r=s.value,l=r.path.substring(r.path.lastIndexOf(".")),u=Date.now()+""+String(Math.random()).substr(3,6)+l,i.next=10,t.uploadFile({filePath:String(r.path),cloudPath:String(r.name)||String(u)});case 10:d=i.sent,e.editorCtx.insertImage({src:d.fileID});case 12:i.next=4;break;case 14:i.next=19;break;case 16:i.prev=16,i.t0=i["catch"](2),c.e(i.t0);case 19:return i.prev=19,c.f(),i.finish(19);case 22:uni.hideLoading();case 23:case"end":return i.stop()}}),i,null,[[2,16,19,22]])})));return function(t){return i.apply(this,arguments)}}()})},editok:function(){this.toolshow=!1}}};e.default=u}).call(this,i("a9ff")["default"])},"8f8d":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/* 水平间距 */\n/* 水平间距 */[data-v-29a81b66] .ql-blank::before{font-style:normal;color:#e0e0e0}.edit[data-v-29a81b66]{padding:%?30?%}.edit .title uni-input[data-v-29a81b66]{font-size:%?46?%;height:%?120?%;border-bottom:1px solid #e4e4e4;margin-bottom:%?30?%;color:#666}.edit .title .placeholderClass[data-v-29a81b66]{color:#e0e0e0}.edit .content .myEdit[data-v-29a81b66]{height:calc(100vh - %?500?%);margin-bottom:%?30?%}.edit .tools[data-v-29a81b66]{width:100%;height:%?80?%;background:#fff;border-top:1px solid #f4f4f4;position:fixed;left:0;bottom:0;display:flex;justify-content:space-around;align-items:center;padding-bottom:30px}.edit .tools .iconfont[data-v-29a81b66]{font-size:%?36?%;color:#333}.edit .tools .iconfont.active[data-v-29a81b66]{color:#0199fe}',""]),t.exports=e},"94d6":function(t,e,i){"use strict";i.r(e);var n=i("71f3"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},abf9:function(t,e,i){"use strict";var n=i("0bd8"),a=i.n(n);a.a}}]);