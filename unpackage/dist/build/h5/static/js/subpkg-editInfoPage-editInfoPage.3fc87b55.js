(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["subpkg-editInfoPage-editInfoPage"],{"03c9":function(t,e,n){"use strict";n("7a82");var i=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("a9e3");var a=i(n("9b31")),o=n("37dc"),u=i(n("8fd4")),c=(0,o.initVueI18n)(u.default),r=c.t,l={name:"uniPopupDialog",mixins:[a.default],emits:["confirm","close"],props:{value:{type:[String,Number],default:""},placeholder:{type:[String,Number],default:""},type:{type:String,default:"error"},mode:{type:String,default:"base"},title:{type:String,default:""},content:{type:String,default:""},beforeClose:{type:Boolean,default:!1},cancelText:{type:String,default:""},confirmText:{type:String,default:""}},data:function(){return{dialogType:"error",focus:!1,val:""}},computed:{okText:function(){return this.confirmText||r("uni-popup.ok")},closeText:function(){return this.cancelText||r("uni-popup.cancel")},placeholderText:function(){return this.placeholder||r("uni-popup.placeholder")},titleText:function(){return this.title||r("uni-popup.title")}},watch:{type:function(t){this.dialogType=t},mode:function(t){"input"===t&&(this.dialogType="info")},value:function(t){this.val=t}},created:function(){this.popup.disableMask(),"input"===this.mode?(this.dialogType="info",this.val=this.value):this.dialogType=this.type},mounted:function(){this.focus=!0},methods:{onOk:function(){"input"===this.mode?this.$emit("confirm",this.val):this.$emit("confirm"),this.beforeClose||this.popup.close()},closeDialog:function(){this.$emit("close"),this.beforeClose||this.popup.close()},close:function(){this.popup.close()}}};e.default=l},"11ac":function(t){t.exports=JSON.parse('{"uni-popup.cancel":"cancel","uni-popup.ok":"ok","uni-popup.placeholder":"pleace enter","uni-popup.title":"Hint","uni-popup.shareTitle":"Share to"}')},"1e51":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"uni-popup-dialog"},[n("v-uni-view",{staticClass:"uni-dialog-title"},[n("v-uni-text",{staticClass:"uni-dialog-title-text",class:["uni-popup__"+t.dialogType]},[t._v(t._s(t.titleText))])],1),"base"===t.mode?n("v-uni-view",{staticClass:"uni-dialog-content"},[t._t("default",[n("v-uni-text",{staticClass:"uni-dialog-content-text"},[t._v(t._s(t.content))])])],2):n("v-uni-view",{staticClass:"uni-dialog-content"},[t._t("default",[n("v-uni-input",{staticClass:"uni-dialog-input",attrs:{type:"text",placeholder:t.placeholderText,focus:t.focus},model:{value:t.val,callback:function(e){t.val=e},expression:"val"}})])],2),n("v-uni-view",{staticClass:"uni-dialog-button-group"},[n("v-uni-view",{staticClass:"uni-dialog-button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closeDialog.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"uni-dialog-button-text"},[t._v(t._s(t.closeText))])],1),n("v-uni-view",{staticClass:"uni-dialog-button uni-border-left",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onOk.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"uni-dialog-button-text uni-button-color"},[t._v(t._s(t.okText))])],1)],1)],1)},a=[]},"385f":function(t,e,n){"use strict";n.r(e);var i=n("9398"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},"3dfb":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/* 水平间距 */\n/* 水平间距 */.uni-popup-dialog[data-v-99b3946c]{width:300px;border-radius:11px;background-color:#fff}.uni-dialog-title[data-v-99b3946c]{display:flex;flex-direction:row;justify-content:center;padding-top:25px}.uni-dialog-title-text[data-v-99b3946c]{font-size:16px;font-weight:500}.uni-dialog-content[data-v-99b3946c]{display:flex;flex-direction:row;justify-content:center;align-items:center;padding:20px}.uni-dialog-content-text[data-v-99b3946c]{font-size:14px;color:#6c6c6c}.uni-dialog-button-group[data-v-99b3946c]{display:flex;flex-direction:row;border-top-color:#f5f5f5;border-top-style:solid;border-top-width:1px}.uni-dialog-button[data-v-99b3946c]{display:flex;flex:1;flex-direction:row;justify-content:center;align-items:center;height:45px}.uni-border-left[data-v-99b3946c]{border-left-color:#f0f0f0;border-left-style:solid;border-left-width:1px}.uni-dialog-button-text[data-v-99b3946c]{font-size:16px;color:#333}.uni-button-color[data-v-99b3946c]{color:#007aff}.uni-dialog-input[data-v-99b3946c]{flex:1;font-size:14px;border:1px #eee solid;height:40px;padding:0 10px;border-radius:5px;color:#555}.uni-popup__success[data-v-99b3946c]{color:#4cd964}.uni-popup__warn[data-v-99b3946c]{color:#f0ad4e}.uni-popup__error[data-v-99b3946c]{color:#dd524d}.uni-popup__info[data-v-99b3946c]{color:#909399}',""]),t.exports=e},5800:function(t,e,n){"use strict";n.r(e);var i=n("66ed"),a=n("385f");for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("5ead");var u=n("f0c5"),c=Object(u["a"])(a["default"],i["b"],i["c"],!1,null,"3663a872",null,!1,i["a"],void 0);e["default"]=c.exports},"5ead":function(t,e,n){"use strict";var i=n("b21d"),a=n.n(i);a.a},"66ed":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var i={uniPopup:n("dfd7").default,uniPopupDialog:n("eb08").default},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"wrapper"},[n("v-uni-view",{staticClass:"item"},[n("v-uni-view",{staticClass:"item_top"},[t._v("当前昵称："),n("v-uni-text",{staticClass:"item_name"},[t._v(t._s(t.newName||t.nickName))])],1),n("v-uni-button",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.open.apply(void 0,arguments)}}},[t._v("修改昵称")])],1),n("uni-popup",{ref:"popup",attrs:{type:"dialog"}},[n("uni-popup-dialog",{attrs:{mode:"input",title:"修改昵称",confirmText:"保存",message:"成功消息",duration:2e3,"before-close":!0},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.close.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)}}})],1),n("hr"),n("v-uni-view",{staticClass:"item item2"},[n("v-uni-view",{staticClass:"item_top"},[t._v("当前头像：")]),n("v-uni-view",{staticClass:"pic"},[n("v-uni-image",{attrs:{src:t.content,mode:"aspectFill"}})],1),n("v-uni-button",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.subpic.apply(void 0,arguments)}}},[t._v("更改头像")])],1)],1)},o=[]},"7a2c":function(t){t.exports=JSON.parse('{"uni-popup.cancel":"取消","uni-popup.ok":"確定","uni-popup.placeholder":"請輸入","uni-popup.title":"提示","uni-popup.shareTitle":"分享到"}')},"8cf4":function(t,e,n){var i=n("3dfb");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("b88638e4",i,!0,{sourceMap:!1,shadowMode:!1})},"8fd4":function(t,e,n){"use strict";n("7a82");var i=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("11ac")),o=i(n("a955")),u=i(n("7a2c")),c={en:a.default,"zh-Hans":o.default,"zh-Hant":u.default};e.default=c},9398:function(t,e,n){"use strict";(function(t){n("7a82");var i=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("c7eb")),o=i(n("b85c")),u=i(n("1da1")),c={data:function(){return{nickName:"",newName:"",content:""}},methods:{open:function(){this.$refs.popup.open()},close:function(){this.$refs.popup.close()},confirm:function(e){this.nicheng=uni.getStorageSync("name").nicheng,this.newName=e,uni.setStorage({key:"name",data:{name:this.nickName,nicheng:this.newName}}),t.database().collection("userinfo").where("name=='".concat(this.nickName,"'")).update({nickName:this.newName}).then((function(t){console.log(t)})),t.database().collection("article").where("user_id=='".concat(this.nickName,"'")).update({user_nicheng:this.newName}).then((function(t){console.log(t)})),t.database().collection("articleComment").where("user_id=='".concat(this.nicheng,"'")).update({user_id:this.newName}).then((function(t){console.log(t)})),t.database().collection("articlelike").where("user_id=='".concat(this.nickName,"'")).update({user_nicheng:this.newName}).then((function(t){console.log(t)})),this.$refs.popup.close()},subpic:function(){var e=this;uni.chooseImage({count:1,crop:{width:1e3,height:1e3},success:function(){var n=(0,u.default)((0,a.default)().mark((function n(i){var u,c,r,l;return(0,a.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:uni.showLoading({title:"上传中请稍后",mask:!0}),u=(0,o.default)(i.tempFiles),n.prev=2,u.s();case 4:if((c=u.n()).done){n.next=16;break}return r=c.value,n.next=8,t.uploadFile({filePath:r.path,cloudPath:String(r.name)});case 8:l=n.sent,console.log(l),console.log("头像",l.fileID),e.content=l.fileID,uni.setStorage({key:"name",data:{name:e.nickName,nicheng:e.newName,headerUrl:e.content}}),console.log("存储了");case 14:n.next=4;break;case 16:n.next=21;break;case 18:n.prev=18,n.t0=n["catch"](2),u.e(n.t0);case 21:return n.prev=21,u.f(),n.finish(21);case 24:t.database().collection("userinfo").where("name=='".concat(e.nickName,"'")).update({touxiang:e.content}).then((function(t){console.log(t)})),t.database().collection("article").where("user_id=='".concat(e.nickName,"'")).update({user_touxiang:e.content}).then((function(t){console.log(t)})),t.database().collection("articleComment").where("user_id=='".concat(e.newName,"'")).update({user_touxiang:e.content}).then((function(t){console.log(t)})),t.database().collection("articlelike").where("user_id=='".concat(e.nickName,"'")).update({user_touxiang:e.content}).then((function(t){console.log(t)})),uni.hideLoading();case 29:case"end":return n.stop()}}),n,null,[[2,18,21,24]])})));return function(t){return n.apply(this,arguments)}}()})}},onLoad:function(){var e=this;this.newName=uni.getStorageSync("name").nicheng,this.nickName=uni.getStorageSync("name").name,t.database().collection("userinfo").where("name=='".concat(this.nickName,"'")).get().then((function(t){console.log(t),e.content=t.result.data[0].touxiang})).catch((function(t){console.log(t)}))}};e.default=c}).call(this,n("a9ff")["default"])},"95f9":function(t,e,n){"use strict";n.r(e);var i=n("03c9"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},"9b31":function(t,e,n){"use strict";n("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{}},created:function(){this.popup=this.getParent()},methods:{getParent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uniPopup",e=this.$parent,n=e.$options.name;while(n!==t){if(e=e.$parent,!e)return!1;n=e.$options.name}return e}}};e.default=i},a155:function(t,e,n){"use strict";var i=n("8cf4"),a=n.n(i);a.a},a955:function(t){t.exports=JSON.parse('{"uni-popup.cancel":"取消","uni-popup.ok":"确定","uni-popup.placeholder":"请输入","uni-popup.title":"提示","uni-popup.shareTitle":"分享到"}')},b21d:function(t,e,n){var i=n("f6af");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("073dbf35",i,!0,{sourceMap:!1,shadowMode:!1})},eb08:function(t,e,n){"use strict";n.r(e);var i=n("1e51"),a=n("95f9");for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("a155");var u=n("f0c5"),c=Object(u["a"])(a["default"],i["b"],i["c"],!1,null,"99b3946c",null,!1,i["a"],void 0);e["default"]=c.exports},f6af:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/* 水平间距 */\n/* 水平间距 */hr[data-v-3663a872]{margin:%?100?% 0}.wrapper[data-v-3663a872]{background-color:#fffae5;width:100%;height:100vh}.wrapper .item[data-v-3663a872]{width:100%;height:%?160?%;font-size:18px;padding-top:%?60?%}.wrapper .item .item_top[data-v-3663a872]{margin-left:%?40?%;margin-bottom:%?40?%}.wrapper .item .item_name[data-v-3663a872]{color:#9e6d38}.wrapper .item uni-button[data-v-3663a872]{width:70%;color:#fff;background-color:#e7b203}.wrapper .item2[data-v-3663a872]{padding:0}.wrapper .item[data-v-3663a872]{width:100%;height:%?160?%;font-size:18px}.wrapper .item .pic[data-v-3663a872]{width:%?260?%;height:%?260?%;margin:0 auto;margin-bottom:%?60?%}.wrapper .item .pic uni-image[data-v-3663a872]{width:%?260?%;height:%?260?%;border-radius:50%}.wrapper .item .item_top[data-v-3663a872]{margin-left:%?40?%;margin-bottom:%?40?%}.wrapper .item .item_name[data-v-3663a872]{color:#9e6d38}.wrapper .item uni-button[data-v-3663a872]{width:70%;color:#fff;background-color:#e7b203}',""]),t.exports=e}}]);