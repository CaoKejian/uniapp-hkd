{"version":3,"sources":["uni-app:///main.js","webpack:///A:/曹珂俭/小程序/test2/subpkg/blogDetail/blogDetail.vue?d178","webpack:///A:/曹珂俭/小程序/test2/subpkg/blogDetail/blogDetail.vue?398b","webpack:///A:/曹珂俭/小程序/test2/subpkg/blogDetail/blogDetail.vue?f2cd","webpack:///A:/曹珂俭/小程序/test2/subpkg/blogDetail/blogDetail.vue?950f","uni-app:///subpkg/blogDetail/blogDetail.vue","webpack:///A:/曹珂俭/小程序/test2/subpkg/blogDetail/blogDetail.vue?72d3"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","uniLoadMore","uniDateformat","myCommentItem","myComment","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","f0","_self","_c","loadingstatus","_f","detailObj","content","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped","customUI","artid","user_id","user_nicheng","user_touxaing","pushPicurls","pushTitle","likeUserArr","isComment","commentObj","article_id","comment_type","commentList","commentinfo","uniloading","filters","formatRichText","match","newContent","methods","uni","title","icon","setTimeout","url","commentEnv","removeEnv","getComment","db","res","oldArr","redDataArr","idArr","reply_comment_id","groupField","replyArr","item","getData","getOne","readUpdata","utilsObj","getLikeUser","clickLike","success","time","count","remove","user_touxiang","articleTitle","articlePic","onReachBottom","onLoad","uniCloud"],"mappings":"qJAAA,MAE2D,MAC3D,aACA,YAFAA,GAAGC,kCAAoCC,EAGvCC,EAAWC,a,gECLX,oIACIC,EADJ,QASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,mCACZ,aAAAF,E,0CCvBf,uQ,iCCAA,IAAIG,EAAJ,0LACA,IACEA,EAAa,CACXC,YAAa,WACX,OAAO,oIAITC,cAAe,WACb,OAAO,uIAITC,cAAe,WACb,OAAO,wEAITC,UAAW,WACT,OAAO,qGAKX,MAAOC,GACP,IAC+C,IAA7CA,EAAEC,QAAQC,QAAQ,wBACa,IAA/BF,EAAEC,QAAQC,QAAQ,QAWlB,MAAMF,EATNG,QAAQC,MAAMJ,EAAEC,SAChBE,QAAQC,MAAM,mBACdD,QAAQC,MACN,uFAEFD,QAAQC,MACN,mDAMN,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETC,GADKJ,EAAIK,MAAMC,GACTN,EAAIO,cAEV,KADAP,EAAIQ,GAAG,iBAAPR,CAAyBA,EAAIS,UAAUC,UAE3CV,EAAIW,IAAIC,KAAOC,OAAOC,OACpB,GACA,CACEC,MAAO,CACLX,GAAIA,MAKRY,GAAmB,EACnBC,EAAkB,GACtBlB,EAAOmB,eAAgB,G,iCC3DvB,yHAAwrB,eAAG,G,wvBCuD3rB,mBACA,6BACAC,cACA,EACA,CACAP,gBACA,OACAQ,SACAb,iBACAE,aACAY,WACAC,gBACAC,iBACAC,eACAC,aACAC,eACAC,aACAC,YACAC,cACAC,gBAEAC,eACAC,eACAC,oBAGAC,SAUAC,2BACA,8CAIA,OAHAC,gEACAA,gEACAA,kEACA,KAUA,OARAC,6CAGA,OAFAD,yEACA,mBACA,KAEAC,gCACAA,sBACA,mFACA,IAGAC,SAEAxC,iBACAyC,aACAC,aACAC,cAEAC,uBACAH,YACAI,6CAEA,MAGAC,uBACA,gCACA,iBACAlD,KAIAmD,sBACA,8CACA,sBAEA,8BAGAC,sBAAA,gKACAC,oKAAA,OAUA,OAVAC,SAEAC,cACAC,uEACA,0BACA,uBAGAC,qBACA,gBACA,SACAJ,sCACAK,mCACA,4BACAC,2CAAA,OAHAC,SAKAJ,uBACA,2CACA,oCAEA,OACAK,6CAGA,gBACA1D,2BACA0C,gBAAA,2CA3BA,IA6BAiB,mBAAA,WACA,qFACA,2EAEAT,uBACAU,YACA,kBACA5D,6CAEA,oCACA,gCACA,SACA,sDAEAmD,uBACA,0BACA,mBACAT,yBACAC,8BAMAkB,sBACAC,wEAIAC,uBAAA,WACA,wFACA,+DACAb,gFACAC,sCACA,gCAIAa,qBAAA,+IACA,0BAUA,OATAtB,aACAC,eACAsB,oBACA,WACAvB,cACAI,iCAIA,0BAGA,GAAAoB,eACAA,mBAAA,eAIA,OAHAxB,aACAC,iBACAC,cACA,0BAMA,OAHA,aACA,qEACA,uCACA,UACAM,yDACA,kEADAiB,SAEA,gBACAjB,2GACAkB,SACAN,iDAEAZ,iCACAlB,mBACAR,kBACAC,4BACA4C,8BACAC,+BACAC,iCAEAT,+CACA,2CA1CA,KA8CAU,yBACA,0BACA9B,eACAC,iBAEA,mBAEA8B,mBAAA,WACA,MAIA,2CACA,mDACA,sDACAC,wHACA,6CAEA,gBACA,gCACA,kBACA,eACA,kBACA,oBAdA,eAiBA,c,8ECpRA,yHAAuxC,eAAG,G","file":"subpkg/blogDetail/blogDetail.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js';\nimport Vue from 'vue'\nimport Page from './subpkg/blogDetail/blogDetail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./blogDetail.vue?vue&type=template&id=85b1f44c&\"\nvar renderjs\nimport script from \"./blogDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./blogDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./blogDetail.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"subpkg/blogDetail/blogDetail.vue\"\nexport default component.exports","export * from \"-!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./blogDetail.vue?vue&type=template&id=85b1f44c&\"","var components\ntry {\n  components = {\n    uniLoadMore: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-load-more/components/uni-load-more/uni-load-more\" */ \"@/uni_modules/uni-load-more/components/uni-load-more/uni-load-more.vue\"\n      )\n    },\n    uniDateformat: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-dateformat/components/uni-dateformat/uni-dateformat\" */ \"@/uni_modules/uni-dateformat/components/uni-dateformat/uni-dateformat.vue\"\n      )\n    },\n    myCommentItem: function () {\n      return import(\n        /* webpackChunkName: \"components/my-commentItem/my-commentItem\" */ \"@/components/my-commentItem/my-commentItem.vue\"\n      )\n    },\n    myComment: function () {\n      return import(\n        /* webpackChunkName: \"components/my-comment/my-comment\" */ \"@/components/my-comment/my-comment.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var f0 = !_vm.loadingstatus\n    ? _vm._f(\"formatRichText\")(_vm.detailObj.content)\n    : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        f0: f0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./blogDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./blogDetail.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"detail\">\r\n\t\t<view class=\"container\">\r\n\r\n\t\t\t<view v-if=\"loadingstatus\">\r\n\t\t\t\t<uni-load-more status=\"loading\" iconType=\"auto\"></uni-load-more>\r\n\t\t\t</view>\r\n\t\t\t<view v-else>\r\n\t\t\t\t<view class=\"title\">{{detailObj.title}}</view>\r\n\t\t\t\t<view class=\"userinfo\">\r\n\t\t\t\t\t<view class=\"avatar\">\r\n\t\t\t\t\t\t<image :src=\"detailObj.user_touxiang?detailObj.user_touxiang:'../../static/touxiang.png'\"\r\n\t\t\t\t\t\t\tmode=\"aspectFill\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"text\">\r\n\t\t\t\t\t\t<view class=\"name\">{{detailObj.user_nicheng||detailObj.user_id}}</view>\r\n\t\t\t\t\t\t<view class=\"small\">\r\n\t\t\t\t\t\t\t<uni-dateformat :date=\"detailObj.publish_date\" format=\"yyyy年MM月dd hh:mm:ss\">\r\n\t\t\t\t\t\t\t</uni-dateformat>前 · 发布于{{detailObj.province}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"content\">\r\n\t\t\t\t\t<rich-text class=\"rich-text\" :nodes=\"detailObj.content|formatRichText\"></rich-text>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"like\">\r\n\t\t\t\t\t<view class=\"btn\" :class=\"detailObj.isLike ?'active':''\" @click=\"clickLike\">\r\n\t\t\t\t\t\t<text class=\"iconfont icon-good-fill\"></text>\r\n\t\t\t\t\t\t<text>{{detailObj.like_count?detailObj.like_count:''}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"users\">\r\n\t\t\t\t\t\t<template v-for=\"item in likeUserArr\" >\r\n\t\t\t\t\t\t\t<image v-if=\"item.user_touxiang\" :src=\"item.user_touxiang\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"text\"><text class=\"num\">{{detailObj.view_count}}</text>人看过</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\r\n\t\t<view class=\"comment\">\r\n\t\t\t<view class=\"zanwu\" v-if=\"!commentList.length\">暂无评论</view>\r\n\t\t\t<view class=\"content\" v-if=\"commentList.length\">\r\n\t\t\t\t<view class=\"item\" v-for=\"item in commentList\" :key=\"item.id\">\r\n\t\t\t\t\t<my-commentItem :item=\"item\"  :commentObj=\"commentObj\" @removeEnv=\"removeEnv\"></my-commentItem>\r\n\t\t\t\t</view>\r\n\t\t\t\t<uni-load-more :status=\"uniloading\"></uni-load-more>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t<my-comment :commentObj=\"commentObj\" @commentEnv=\"commentEnv\" :pushPicurls='pushPicurls' :pushTitle=\"pushTitle\"></my-comment>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\tconst db = uniCloud.database()\r\n\tconst utilsObj = uniCloud.importObject('utilsObj', {\r\n\t\tcustomUI: true\r\n\t})\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tartid: \"\",\r\n\t\t\t\tloadingstatus: true,\r\n\t\t\t\tdetailObj: \"\",\r\n\t\t\t\tuser_id: \"\",\r\n\t\t\t\tuser_nicheng: \"\",\r\n\t\t\t\tuser_touxaing:\"\",\r\n\t\t\t\tpushPicurls:'',\r\n\t\t\t\tpushTitle:\"\",\r\n\t\t\t\tlikeUserArr:[],\r\n\t\t\t\tisComment:true,\r\n\t\t\t\tcommentObj:{\r\n\t\t\t\t\tarticle_id:\"\",\r\n\t\t\t\t\tcomment_type:0\r\n\t\t\t\t},\r\n\t\t\t\tcommentList:[],\r\n\t\t\t\tcommentinfo:[],\r\n\t\t\t\tuniloading:\"more\",\r\n\t\t\t};\r\n\t\t},\r\n\t\tfilters: {\r\n\t\t\t/**\r\n\t\t\t * 处理富文本里的图片宽度自适应\r\n\t\t\t * 1.去掉img标签里的style、width、height属性\r\n\t\t\t * 2.img标签添加style属性：max-width:100%;height:auto\r\n\t\t\t * 3.修改所有style里的width属性为max-width:100%\r\n\t\t\t * 4.去掉<br/>标签\r\n\t\t\t * @param html\r\n\t\t\t * @returns {void|string|*}\r\n\t\t\t */\r\n\t\t\tformatRichText(html) { //控制小程序中图片大小\r\n\t\t\t\tlet newContent = html.replace(/<img[^>]*>/gi, function(match, capture) {\r\n\t\t\t\t\tmatch = match.replace(/style=\"[^\"]+\"/gi, '').replace(/style='[^']+'/gi, '');\r\n\t\t\t\t\tmatch = match.replace(/width=\"[^\"]+\"/gi, '').replace(/width='[^']+'/gi, '');\r\n\t\t\t\t\tmatch = match.replace(/height=\"[^\"]+\"/gi, '').replace(/height='[^']+'/gi, '');\r\n\t\t\t\t\treturn match;\r\n\t\t\t\t});\r\n\t\t\t\tnewContent = newContent.replace(/style=\"[^\"]+\"/gi, function(match, capture) {\r\n\t\t\t\t\tmatch = match.replace(/width:[^;]+;/gi, 'max-width:100%;').replace(/width:[^;]+;/gi,\r\n\t\t\t\t\t\t'max-width:100%;');\r\n\t\t\t\t\treturn match;\r\n\t\t\t\t});\r\n\t\t\t\tnewContent = newContent.replace(/<br[^>]*\\/>/gi, '');\r\n\t\t\t\tnewContent = newContent.replace(/\\<img/gi,\r\n\t\t\t\t\t'<img style=\"max-width:100%;height:auto;display:inline-block;margin:10rpx auto;\"');\r\n\t\t\t\treturn newContent;\r\n\t\t\t}\r\n\t\t},\r\n\t\t\tmethods: {\r\n\t\t\t\t// 错误\r\n\t\t\t\terror() {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"参数有误\",\r\n\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t\turl: '/pages/interlocution/interlocution'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}, 800)\r\n\t\t\t\t},\r\n\t\t\t\t// 评论成功 回调\r\n\t\t\t\tcommentEnv(e){\r\n\t\t\t\t\tthis.commentList.unshift({\r\n\t\t\t\t\t\t...this.commentObj,\r\n\t\t\t\t\t\t...e\r\n\t\t\t\t\t})\r\n\t\t\t\t},\r\n\t\t\t\t// 删除评论\r\n\t\t\t\tremoveEnv(e){\r\n\t\t\t\t\tlet index = this.commentList.findIndex(item=>{\r\n\t\t\t\t\t\treturn item._id==e.id\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.commentList.splice(index,1)\r\n\t\t\t\t},\r\n\t\t\t\t//获取评论\r\n\t\t\t\tasync getComment(){\r\n\t\t\t\t\tlet res = await db.collection('articleComment').where(`article_id=='${this.artid}' && comment_type==0`).orderBy('comment_date desc').skip(this.commentList.length).limit(5).get()\r\n\t\t\t\t\t// 分页\r\n\t\t\t\t\tlet oldArr = this.commentList\r\n\t\t\t\t\tlet redDataArr=[...this.commentList,...res.result.data]\r\n\t\t\t\t\tif(res.result.data.length==0){\r\n\t\t\t\t\t\tthis.uniloading='noMore'\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet idArr = redDataArr.map(item=>{\r\n\t\t\t\t\t\treturn item._id\r\n\t\t\t\t\t})\r\n\t\t\t\t\tconst replyArr = await db.collection('articleComment').where({\r\n\t\t\t\t\t\treply_comment_id:db.command.in(idArr)\r\n\t\t\t\t\t}).groupBy('reply_comment_id')\r\n\t\t\t\t\t.groupField('count(*) as totalReply').get()\r\n\t\t\t\t\t\r\n\t\t\t\t\tredDataArr.forEach(item=>{\r\n\t\t\t\t\t\tlet index =replyArr.result.data.findIndex(find=>{\r\n\t\t\t\t\t\t\treturn find.reply_comment_id == item._id\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tif(index>-1){\r\n\t\t\t\t\t\t\titem.totalReply = replyArr.result.data[index].totalReply\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\tthis.commentList = redDataArr\r\n\t\t\t\t\t\tconsole.log(this.commentList);\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t},\r\n\t\t\t\tgetData() {\r\n\t\t\t\t\tlet likeTemp = db.collection('articlelike').where(`user_id=='${this.user_id}'`).getTemp()\r\n\t\t\t\t\tlet artTemp = db.collection('article').where(`_id==\"${this.artid}\"`).getTemp()\r\n\t\t\t\t\t\r\n\t\t\t\t\tdb.collection(artTemp, likeTemp).get({\r\n\t\t\t\t\t\tgetOne: true\r\n\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\tconsole.log(\"文章title\",res.result.data.picurls\r\n);\r\n\t\t\t\t\t\t\tthis.pushPicurls =res.result.data.picurls\r\n\t\t\t\t\t\t\tthis.pushTitle =res.result.data.title\r\n\t\t\t\t\t\tlet isLike = false\r\n\t\t\t\t\t\tif(this.user_id)\tisLike = res.result.data._id.articlelike.length ? true : false;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tres.result.data.isLike = isLike;\r\n\t\t\t\t\t\tthis.detailObj = res.result.data\r\n\t\t\t\t\t\tthis.loadingstatus = false\r\n\t\t\t\t\t\tuni.setNavigationBarTitle({\r\n\t\t\t\t\t\t\ttitle: this.detailObj.title\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t},\r\n\t\t\t\t// 修改阅读量\r\n\t\t\t\treadUpdata() {\r\n\t\t\t\t\tutilsObj.operation('article', \"view_count\", this.artid, 2).then(res => {\r\n\t\t\t\t\t})\r\n\t\t\t\t},\r\n\t\t\t\t// 获取点赞用户\r\n\t\t\t\tgetLikeUser(){\r\n\t\t\t\t\tlet likeTemp = db.collection('articlelike').where(`article_id == '${this.artid}'`).getTemp()\r\n\t\t\t\t\tlet userTemp = db.collection('article').field('_id,user_touxiang').getTemp()\r\n\t\t\t\t\tdb.collection(likeTemp,userTemp).orderBy('publish_date desc').limit(5).get().then(res=>{\r\n\t\t\t\t\t\tres.result.data=res.result.data.reverse()\r\n\t\t\t\t\t\tthis.likeUserArr = res.result.data\r\n\t\t\t\t\t})\r\n\t\t\t\t},\r\n\t\t\t\t// 点赞操作\r\n\t\t\t\tasync clickLike() {\r\n\t\t\t\t\tif(!this.user_id){\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle:\"是否前往登录\",\r\n\t\t\t\t\t\t\tsuccess:res=>{\r\n\t\t\t\t\t\t\t\tif(res.confirm){\r\n\t\t\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\t\turl:'/subpkg/signin/signin'\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\treturn \r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet time = Date.now()\r\n\t\t\t\t\tif (time - this.likeTime < 2000) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: \"您的操作太频繁了\",\r\n\t\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t this.likeTime = time\r\n\t\t\t\t\tthis.detailObj.isLike ? this.detailObj.like_count-- : this.detailObj.like_count++\r\n\t\t\t\t\tthis.detailObj.isLike = !this.detailObj.isLike\r\n\t\t\t\t\t// 查询有没有点过赞\r\n\t\t\t\t\tlet count = await db.collection('articlelike').where(\r\n\t\t\t\t\t\t`article_id=='${this.artid}' &&user_id =='${this.user_id}'`).count()\r\n\t\t\t\t\tif (count.result.total) {\r\n\t\t\t\t\t\tdb.collection('articlelike').where(`article_id=='${this.artid}' &&user_id =='${this.user_id}'`)\r\n\t\t\t\t\t\t\t.remove()\r\n\t\t\t\t\t\tutilsObj.operation('article', \"like_count\", this.artid, -1)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdb.collection(\"articlelike\").add({\r\n\t\t\t\t\t\t\tarticle_id: this.artid,\r\n\t\t\t\t\t\t\tuser_id: this.user_id,\r\n\t\t\t\t\t\t\tuser_nicheng: this.user_nicheng,\r\n\t\t\t\t\t\t\tuser_touxiang:this.user_touxiang,\r\n\t\t\t\t\t\t\tarticleTitle:this.detailObj.title,\r\n\t\t\t\t\t\t\tarticlePic:this.detailObj.picurls,\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tutilsObj.operation('article', \"like_count\", this.artid, 1)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonReachBottom() {\r\n\t\t\t\tthis.uniloading='loading'\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle:\"评论正在加载\"\r\n\t\t\t\t})\r\n\t\t\t\tthis.getComment()\r\n\t\t\t},\r\n\t\tonLoad(e) {\r\n\t\t\tif (!e.id) {\r\n\t\t\t\tthis.error()\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tthis.user_id = uni.getStorageSync('name').name\r\n\t\t\tthis.user_nicheng = uni.getStorageSync('name').nicheng\r\n\t\t\tthis.user_touxiang = uni.getStorageSync('name').headerUrl\r\n\t\t\tuniCloud.database().collection('userinfo').where(`name==\"${this.user_id}\"`).field(\"touxiang\").get().then(res=>{\r\n\t\t\t\tthis.user_touxaing = res.result.data[0].touxiang\r\n\t\t\t})\r\n\t\t\tthis.artid = e.id\r\n\t\t\tthis.commentObj.article_id =e.id\r\n\t\t\tthis.getComment()\r\n\t\t\tthis.getData()\r\n\t\t\tthis.readUpdata()\r\n\t\t\tthis.getLikeUser()\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.rich-text img {\r\n\t\tmax-width: 100%;\r\n\t}\r\n\r\n\t.detail {\r\n\t\tbackground: #f8f8f8;\r\n\t\tmin-height: calc(100vh - var(--window-top));\r\n\r\n\t\t.container {\r\n\t\t\tpadding: 30rpx;\r\n\t\t\tbackground: #fff;\r\n\r\n\t\t\t.title {\r\n\t\t\t\tfont-size: 46rpx;\r\n\t\t\t\tcolor: #333;\r\n\t\t\t\tline-height: 1.4em;\r\n\t\t\t\tfont-weight: 600;\r\n\t\t\t}\r\n\r\n\t\t\t.userinfo {\r\n\t\t\t\tpadding: 20rpx 0 50rpx;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\r\n\t\t\t\t.avatar {\r\n\t\t\t\t\twidth: 60rpx;\r\n\t\t\t\t\theight: 60rpx;\r\n\t\t\t\t\tpadding-right: 15rpx;\r\n\r\n\t\t\t\t\timage {\r\n\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\theight: 100%;\r\n\t\t\t\t\t\tborder-radius: 50%;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.text {\r\n\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\tcolor: #555;\r\n\r\n\t\t\t\t\t.small {\r\n\t\t\t\t\t\tfont-size: 20rpx;\r\n\t\t\t\t\t\tcolor: #999;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.content {\r\n\t\t\t\twidth: 100%;\r\n\r\n\t\t\t\tuni-rich-text img {\r\n\t\t\t\t\tmax-width: 100% !important;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.rich-text img {\r\n\t\t\t\t\tmax-width: 100%;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.like {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tpadding: 80rpx 50rpx 50rpx;\r\n\r\n\t\t\t\t.btn {\r\n\t\t\t\t\twidth: 260rpx;\r\n\t\t\t\t\theight: 120rpx;\r\n\t\t\t\t\tbackground: #e4e4e4;\r\n\t\t\t\t\tborder-radius: 100rpx;\r\n\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tflex-direction: column;\r\n\t\t\t\t\tfont-size: 28rpx;\r\n\r\n\t\t\t\t\t.iconfont {\r\n\t\t\t\t\t\tfont-size: 50rpx;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&.active {\r\n\t\t\t\t\t\tbackground: #0199FE;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.text {\r\n\t\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\t\tcolor: #666;\r\n\r\n\t\t\t\t\t.num {\r\n\t\t\t\t\t\tcolor: #0199FE\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.spot {\r\n\t\t\t\t\t\tpadding: 0 10rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.users {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\tpadding: 30rpx 0;\r\n\r\n\t\t\t\t\timage {\r\n\t\t\t\t\t\twidth: 50rpx;\r\n\t\t\t\t\t\theight: 50rpx;\r\n\t\t\t\t\t\tborder-radius: 50%;\r\n\t\t\t\t\t\tborder: 3px solid #fff;\r\n\t\t\t\t\t\tmargin-left: -20rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\r\n\t\t.comment{\r\n\t\t\tpadding: 30rpx;\r\n\t\t\tpadding-bottom: 120rpx;\r\n\t\t}\r\n\t}\r\n</style>\n","import mod from \"-!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./blogDetail.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./blogDetail.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}