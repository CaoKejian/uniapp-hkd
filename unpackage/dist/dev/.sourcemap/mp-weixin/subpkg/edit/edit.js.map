{"version":3,"sources":["uni-app:///main.js","webpack:///A:/曹珂俭/小程序/test2/subpkg/edit/edit.vue?85c5","webpack:///A:/曹珂俭/小程序/test2/subpkg/edit/edit.vue?7a72","webpack:///A:/曹珂俭/小程序/test2/subpkg/edit/edit.vue?056f","webpack:///A:/曹珂俭/小程序/test2/subpkg/edit/edit.vue?de6d","uni-app:///subpkg/edit/edit.vue","webpack:///A:/曹珂俭/小程序/test2/subpkg/edit/edit.vue?9ffa"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped","data","toolshow","headShow","boldShow","italicShow","artObj","title","content","description","picurls","province","user_id","user_nicheng","user_touxiang","onLoad","uniCloud","console","methods","onSubmit","success","uni","addData","db","setTimeout","url","onFocus","onEditReady","size","context","checkStatus","onStatuschange","clickDivider","clickHead","clickBold","clickItalic","clickInsertImage","mask","res","item","suffix","randomName","filePath","cloudPath","src","editok"],"mappings":"yIAAA,MAE2D,MAC3D,aACA,YAFAA,GAAGC,kCAAoCC,EAGvCC,EAAWC,a,gECLX,oIACIC,EADJ,QASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,uBACZ,aAAAF,E,0CCvBf,uQ,iCCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G,iCCRvB,yHAAkrB,eAAG,G,kKC8BrrB,imDACA,qBACA,CACAC,gBACA,OACAC,YACAC,YACAC,YACAC,cACAC,QACAC,SACAC,WACAC,eACAC,WACAC,YACAC,WACAC,gBACAC,oBAIAC,kBAAA,WACA,kDACA,0DACAC,6GACA,iDACAC,6CAEA,qCACA,wBAGAC,SAEAC,oBAAA,WACA,4BACAC,oBACAH,eACA,wCACA,wBACA,yCACAI,eACAd,iBAEAU,sBACA,gBAKAK,mBACAC,iCACA,cACA,kBACAF,gBACAA,aACAd,eAEAiB,uBACAH,YACAI,0CACA,WAEA,mBACAR,mBAIAS,mBACA,kBAGAC,uBAAA,WACAN,2DACAO,QACAC,aACA,YACAZ,eACA,yBACA,QAGAa,4BACA,oBACA,WAEA,YAIAC,2BACA,eACA,2CACA,yCACA,8CAGAC,wBACA,gCAGAC,qBACA,6BACA,uDAGAC,qBACA,6BACA,+BAGAC,uBACA,iCACA,iCAGAC,4BAAA,WACAf,eACAD,mBAAA,0IACAC,eACAd,eACA8B,UACA,IACAC,aAAA,yDAEA,OAFAC,UACAC,4CACAC,oDAAA,UACAzB,cACA0B,wBACAC,sCACA,QAHAL,SAIA,yBACAM,eACA,kJAEAvB,gBAAA,gEACA,sDAjBAD,MAqBAyB,kBACA,oBAIA,c,8EC9KA,yHAAixC,eAAG,G","file":"subpkg/edit/edit.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js';\nimport Vue from 'vue'\nimport Page from './subpkg/edit/edit.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./edit.vue?vue&type=template&id=ee6d6c8c&\"\nvar renderjs\nimport script from \"./edit.vue?vue&type=script&lang=js&\"\nexport * from \"./edit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./edit.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"subpkg/edit/edit.vue\"\nexport default component.exports","export * from \"-!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./edit.vue?vue&type=template&id=ee6d6c8c&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./edit.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"edit\">\n\t\t<view class=\"title\">\r\n\t\t\t<input type=\"text\" v-model=\"artObj.title\" placeholder=\"请输入完整的标题\" placeholder-class=\"placeholderClass\">\r\n\t\t</view>\r\n\t\t<view class=\"content\">\r\n\t\t\t<editor placeholder=\"写点什么吧\" class=\"myEdit\"\r\n\t\t\t\tshow-img-resize\r\n\t\t\t\tshow-img-size\r\n\t\t\t\tshow-img-toolbar\r\n\t\t\t\t@ready=\"onEditReady\"\r\n\t\t\t\t@focus=\"onFocus\"\r\n\t\t\t\t@statuschange=\"onStatuschange\"\r\n\t\t\t></editor>\r\n\t\t</view>\r\n\t\t<view class=\"btnGroup\">\r\n\t\t\t<button @click=\"onSubmit\" type=\"primary\" :disabled=\"!artObj.title.length\">确认发表</button>\r\n\t\t</view>\r\n\t\t<view class=\"tools\" v-if=\"toolshow\">\r\n\t\t\t<view class=\"item\" @click=\"clickHead\"><text class=\"iconfont icon-zitibiaoti\" :class=\"headShow?'active':''\"></text></view>\r\n\t\t\t<view class=\"item\" @click=\"clickBold\"><text class=\"iconfont icon-zitijiacu\" :class=\"boldShow?'active':''\"></text></view>\r\n\t\t\t<view class=\"item\" @click=\"clickItalic\"><text class=\"iconfont icon-zitixieti\" :class=\"italicShow?'active':''\"></text></view>\r\n\t\t\t<view class=\"item\" @click=\"clickDivider\"><text class=\"iconfont icon-fengexian\" ></text></view>\r\n\t\t\t<view class=\"item\" @click=\"clickInsertImage\"><text class=\"iconfont icon-charutupian\" ></text></view>\r\n\t\t\t<view class=\"item\" @click=\"editok\"><text class=\"iconfont icon-duigou_kuai\" ></text></view>\r\n\t\t</view>\n\t</view>\n</template>\n\n<script>\r\n\timport {getImgSrc,getProvince} from '@/utils/tools.js'\r\n\tconst db = uniCloud.database()\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\ttoolshow:false,\r\n\t\t\t\theadShow:false,\r\n\t\t\t\tboldShow:false,\r\n\t\t\t\titalicShow:false,\r\n\t\t\t\tartObj:{\r\n\t\t\t\t\ttitle:\"\",\r\n\t\t\t\t\tcontent:\"\",\r\n\t\t\t\t\tdescription:\"\",\r\n\t\t\t\t\tpicurls:\"\",\r\n\t\t\t\t\tprovince:\"\",\r\n\t\t\t\t\tuser_id:\"\",\r\n\t\t\t\t\tuser_nicheng:\"\",\r\n\t\t\t\t\tuser_touxiang:\"\"\r\n\t\t\t\t}\n\t\t\t};\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tthis.artObj.user_id = uni.getStorageSync('name').name\r\n\t\t\tthis.artObj.user_nicheng = uni.getStorageSync('name').nicheng\r\n\t\t\tuniCloud.database().collection('userinfo').where(`name=='${this.artObj.user_id}'`).get().then(res=>{\r\n\t\t\t\tthis.artObj.user_touxiang = res.result.data[0].touxiang\r\n\t\t\t\tconsole.log(\"头像\",this.artObj.user_touxiang);\r\n\t\t\t})\r\n\t\t\tgetProvince().then(res=>{\r\n\t\t\t\tthis.artObj.province = res\r\n\t\t\t})\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\t// 点击提交\r\n\t\t\tonSubmit(){\r\n\t\t\t\tthis.editorCtx.getContents({\r\n\t\t\t\t\tsuccess:res=>{\r\n\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\tthis.artObj.description = res.text.slice(0,50)\r\n\t\t\t\t\t\tthis.artObj.content = res.html\r\n\t\t\t\t\t\tthis.artObj.picurls = getImgSrc(res.html)\r\n\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\ttitle:\"发布中...\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tconsole.log(this.artObj);\r\n\t\t\t\t\t\tthis.addData()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 保存数据库\r\n\t\t\taddData(){\r\n\t\t\t\tdb.collection('article').add({\r\n\t\t\t\t\t...this.artObj\r\n\t\t\t\t}).then(res=>{\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle:\"发布成功\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t\turl:'/pages/interlocution/interlocution'\r\n\t\t\t\t\t\t},800)\r\n\t\t\t\t\t})\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 显示与隐藏\r\n\t\t\tonFocus(){\r\n\t\t\t\tthis.toolshow = true\r\n\t\t\t},\r\n\t\t\t// 获得焦点\r\n\t\t\tonEditReady(){\r\n\t\t\t\tuni.createSelectorQuery().in(this).select('.myEdit').fields({\r\n\t\t\t\t\t\tsize:true,\r\n\t\t\t\t\t\tcontext:true\r\n\t\t\t\t},res=>{\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\tthis.editorCtx = res.context\r\n\t\t\t\t}).exec()\r\n\t\t\t},\r\n\t\t\t// 检查状态改变\r\n\t\t\tcheckStatus(name,detail,obj){\r\n\t\t\t\tif(detail.hasOwnProperty(name)){\r\n\t\t\t\t\tthis[obj] = true\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis[obj] = false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 当阳市发生改变的时候\r\n\t\t\tonStatuschange(e){\r\n\t\t\t\tlet detail = e.detail\r\n\t\t\t\tthis.checkStatus(\"header\",detail,this.headShow)\r\n\t\t\t\tthis.checkStatus(\"bold\",detail,this.boldShow)\r\n\t\t\t\tthis.checkStatus(\"italic\",detail,this.italicShow)\r\n\t\t\t},\r\n\t\t\t// 添加分割线\r\n\t\t\tclickDivider(){\r\n\t\t\t\tthis.editorCtx.insertDivider()\r\n\t\t\t},\r\n\t\t\t// 添加大标题\r\n\t\t\tclickHead(){\r\n\t\t\t\tthis.headShow = !this.headShow\r\n\t\t\t\tthis.editorCtx.format(\"header\",this.headShow?'h2':false)\r\n\t\t\t},\r\n\t\t\t// 加粗\r\n\t\t\tclickBold(){\r\n\t\t\t\tthis.boldShow = !this.boldShow\r\n\t\t\t\tthis.editorCtx.format(\"bold\")\r\n\t\t\t},\r\n\t\t\t// 倾斜\r\n\t\t\tclickItalic(){\r\n\t\t\t\tthis.italicShow = !this.italicShow\r\n\t\t\t\tthis.editorCtx.format(\"italic\")\r\n\t\t\t},\r\n\t\t\t// 添加图像\r\n\t\t\tclickInsertImage(){\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tsuccess:async res=>{\r\n\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\ttitle:\"上传中请稍后\",\r\n\t\t\t\t\t\t\tmask:true\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tfor (let item of res.tempFiles) {\r\n\t\t\t\t\t\t\tlet suffix = item.path.substring(item.path.lastIndexOf(\".\"))\r\n\t\t\t\t\t\t\tlet randomName = Date.now() + '' +  String(Math.random()).substr(3,6) + suffix\r\n\t\t\t\t\t\t\tlet res = await uniCloud.uploadFile({\r\n\t\t\t\t\t\t\t\tfilePath:String(item.path),\r\n\t\t\t\t\t\t\t\tcloudPath:String(item.name) || String(randomName)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tthis.editorCtx.insertImage({\r\n\t\t\t\t\t\t\t\tsrc:res.fileID\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 完成\r\n\t\t\teditok(){\r\n\t\t\t\tthis.toolshow = false\r\n\t\t\t},\r\n\t\t\t\r\n\t\t}\n\t}\r\n</script>\n\n<style lang=\"scss\">\r\n\t/deep/ .ql-blank::before{\r\n\t\tfont-style: normal;\r\n\t\tcolor: #e0e0e0;\r\n\t}\n.edit{\r\n\tpadding: 30rpx;\r\n\t.title{\r\n\t\tinput{\r\n\t\t\tfont-size: 46rpx;\r\n\t\t\theight: 120rpx;\r\n\t\t\tborder-bottom: 1px solid #e4e4e4;\r\n\t\t\tmargin-bottom: 30rpx;\r\n\t\t\tcolor: #666;\r\n\t\t}\r\n\t\t.placeholderClass{\r\n\t\t\tcolor: #e0e0e0;\r\n\t\t}\r\n\t}\r\n\r\n\t.content{\r\n\t\t.myEdit{\r\n\t\t\t\t\theight: calc(100vh - 500rpx);\r\n\t\t\t\t\tmargin-bottom:30rpx;\r\n\t\t\t\t}\t\r\n\t}\r\n\t.tools{\r\n\t\twidth: 100%;\r\n\t\theight: 80rpx;\r\n\t\tbackground: #fff;\r\n\t\tborder-top: 1px solid #f4f4f4;\r\n\t\tposition: fixed;\r\n\t\tleft: 0;\r\n\t\tbottom: 0;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-around;\r\n\t\talign-items: center;\r\n\t\tpadding-bottom: 30px;\r\n\t\t.iconfont{\r\n\t\t\tfont-size: 36rpx;\r\n\t\t\tcolor: #333;\r\n\t\t\t&.active{\r\n\t\t\t\tcolor:#0199fe;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\n</style>\n","import mod from \"-!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./edit.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../All tools/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./edit.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}