(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subpkg/editInfoPage/editInfoPage"],{161:function(e,n,t){"use strict";(function(e){var n=t(3);t(25),t(26);n(t(24));var o=n(t(162));wx.__webpack_require_UNI_MP_PLUGIN__=t,e(o.default)}).call(this,t(1)["createPage"])},162:function(e,n,t){"use strict";t.r(n);var o=t(163),a=t(165);for(var r in a)["default"].indexOf(r)<0&&function(e){t.d(n,e,(function(){return a[e]}))}(r);t(167);var c,i=t(43),u=Object(i["default"])(a["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],c);u.options.__file="subpkg/editInfoPage/editInfoPage.vue",n["default"]=u.exports},163:function(e,n,t){"use strict";t.r(n);var o=t(164);t.d(n,"render",(function(){return o["render"]})),t.d(n,"staticRenderFns",(function(){return o["staticRenderFns"]})),t.d(n,"recyclableRender",(function(){return o["recyclableRender"]})),t.d(n,"components",(function(){return o["components"]}))},164:function(e,n,t){"use strict";var o;t.r(n),t.d(n,"render",(function(){return a})),t.d(n,"staticRenderFns",(function(){return c})),t.d(n,"recyclableRender",(function(){return r})),t.d(n,"components",(function(){return o}));try{o={uniPopup:function(){return t.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(t.bind(null,270))},uniPopupDialog:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-popup/components/uni-popup-dialog/uni-popup-dialog")]).then(t.bind(null,345))}}}catch(i){if(-1===i.message.indexOf("Cannot find module")||-1===i.message.indexOf(".vue"))throw i;console.error(i.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var a=function(){var e=this,n=e.$createElement;e._self._c},r=!1,c=[];a._withStripped=!0},165:function(e,n,t){"use strict";t.r(n);var o=t(166),a=t.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(r);n["default"]=a.a},166:function(e,n,t){"use strict";(function(e,o){var a=t(3);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(t(27)),c=a(t(29));function i(e,n){var t="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=u(e))||n&&e&&"number"===typeof e.length){t&&(e=t);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,i=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return c=e.done,e},e:function(e){i=!0,r=e},f:function(){try{c||null==t.return||t.return()}finally{if(i)throw r}}}}function u(e,n){if(e){if("string"===typeof e)return s(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?s(e,n):void 0}}function s(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,o=new Array(n);t<n;t++)o[t]=e[t];return o}var l={data:function(){return{nickName:"",newName:"",content:""}},methods:{open:function(){this.$refs.popup.open()},close:function(){this.$refs.popup.close()},confirm:function(n){this.nicheng=e.getStorageSync("name").nicheng,this.newName=n,e.setStorage({key:"name",data:{name:this.nickName,nicheng:this.newName}}),o.database().collection("userinfo").where("name=='".concat(this.nickName,"'")).update({nickName:this.newName}).then((function(e){console.log(e)})),o.database().collection("article").where("user_id=='".concat(this.nickName,"'")).update({user_nicheng:this.newName}).then((function(e){console.log(e)})),o.database().collection("articleComment").where("user_id=='".concat(this.nicheng,"'")).update({user_id:this.newName}).then((function(e){console.log(e)})),o.database().collection("articlelike").where("user_id=='".concat(this.nickName,"'")).update({user_nicheng:this.newName}).then((function(e){console.log(e)})),this.$refs.popup.close()},subpic:function(){var n=this;e.chooseImage({count:1,crop:{width:1e3,height:1e3},success:function(){var t=(0,c.default)(r.default.mark((function t(a){var c,u,s,l;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.showLoading({title:"上传中请稍后",mask:!0}),c=i(a.tempFiles),t.prev=2,c.s();case 4:if((u=c.n()).done){t.next=16;break}return s=u.value,t.next=8,o.uploadFile({filePath:s.path,cloudPath:String(s.name)});case 8:l=t.sent,console.log(l),console.log("头像",l.fileID),n.content=l.fileID,e.setStorage({key:"name",data:{name:n.nickName,nicheng:n.newName,headerUrl:n.content}}),console.log("存储了");case 14:t.next=4;break;case 16:t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](2),c.e(t.t0);case 21:return t.prev=21,c.f(),t.finish(21);case 24:o.database().collection("userinfo").where("name=='".concat(n.nickName,"'")).update({touxiang:n.content}).then((function(e){console.log(e)})),o.database().collection("article").where("user_id=='".concat(n.nickName,"'")).update({user_touxiang:n.content}).then((function(e){console.log(e)})),o.database().collection("articleComment").where("user_id=='".concat(n.newName,"'")).update({user_touxiang:n.content}).then((function(e){console.log(e)})),o.database().collection("articlelike").where("user_id=='".concat(n.nickName,"'")).update({user_touxiang:n.content}).then((function(e){console.log(e)})),e.hideLoading();case 29:case"end":return t.stop()}}),t,null,[[2,18,21,24]])})));function a(e){return t.apply(this,arguments)}return a}()})}},onLoad:function(){var n=this;this.newName=e.getStorageSync("name").nicheng,this.nickName=e.getStorageSync("name").name,o.database().collection("userinfo").where("name=='".concat(this.nickName,"'")).get().then((function(e){console.log(e),n.content=e.result.data[0].touxiang})).catch((function(e){console.log(e)}))}};n.default=l}).call(this,t(1)["default"],t(26)["default"])},167:function(e,n,t){"use strict";t.r(n);var o=t(168),a=t.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(r);n["default"]=a.a},168:function(e,n,t){}},[[161,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/subpkg/editInfoPage/editInfoPage.js.map